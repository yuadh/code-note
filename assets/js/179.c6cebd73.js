(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{489:function(v,_,t){"use strict";t.r(_);var s=t(7),o=Object(s.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"定时计数器"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#定时计数器"}},[v._v("#")]),v._v(" 定时计数器")]),v._v(" "),_("ol",[_("li",[v._v("SOC固件配置 :  STM32 , AVR32 SOC（System On Chip）")]),v._v(" "),_("li",[v._v("操作单片机的本质：操作/设置寄存器")]),v._v(" "),_("li",[v._v("中断（定时/计数器的中断）")])]),v._v(" "),_("h2",{attrs:{id:"应用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[v._v("#")]),v._v(" 应用")]),v._v(" "),_("p",[v._v("定时或延时控制、对外部事件的检测、计数等")]),v._v(" "),_("p",[v._v("**有两个16位定时/计数器（T0和T1） 8053有额外T2                                       **")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("所谓计数器就是对外不输入脉冲的计数")])]),v._v(" "),_("li",[_("p",[v._v("所谓定时器也是对脉冲进行计数完成的，计数的是MCS-51内部产生的标准脉冲，通过计数脉冲个数实现定时")]),v._v(" "),_("p",[_("strong",[v._v("所以本质上是一致的统称为定时器")])])])]),v._v(" "),_("p",[_("strong",[v._v("定时")]),v._v("：看不见的，没有引脚相关")]),v._v(" "),_("h2",{attrs:{id:"定时器的结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#定时器的结构"}},[v._v("#")]),v._v(" 定时器的结构")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://code.yuadh.com/doc-img/xxx.png",alt:""}})]),v._v(" "),_("ul",[_("li",[_("p",[v._v("**组成：**两个16位的定时器T0和T1，以及他们的工作方式寄存器")]),v._v(" "),_("p",[_("code",[v._v("TMOD")]),v._v(" 和控制寄存器 "),_("code",[v._v("TCON")]),v._v(" 等组成。内部通过总线与CPU相连")])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("定时器 "),_("code",[v._v("T0")]),v._v(" 和 "),_("code",[v._v("T1")])]),v._v(" 各由两个 8 位特殊功能寄存器 "),_("code",[v._v("TH0、TL0、TH1、TL1")])])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("工作方式寄存器 TMOD")]),v._v(" : 用于设置定时器的工作模式和工作方式")])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("控制寄存器 "),_("code",[v._v("TCON")]),v._v(":")]),v._v(" 用于启动和停止定时器的计数，并控制定时器的状态")])])]),v._v(" "),_("p",[v._v("单片机复位时，两个寄存器的所有位都被清零")]),v._v(" "),_("h3",{attrs:{id:"tmod"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tmod"}},[v._v("#")]),v._v(" TMOD")]),v._v(" "),_("p",[v._v("设置定时计数器的模式和工作方式")]),v._v(" "),_("p",[_("strong",[v._v("模式")]),v._v("：定时模式 / 计数模式")]),v._v(" "),_("p",[_("strong",[v._v("工作方式")]),v._v(" : 三种（0，1，2）")]),v._v(" "),_("h3",{attrs:{id:"tcon"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcon"}},[v._v("#")]),v._v(" TCON")]),v._v(" "),_("p",[v._v("控制定时计数器的启停")]),v._v(" "),_("h3",{attrs:{id:"运行"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[v._v("#")]),v._v(" 运行")]),v._v(" "),_("p",[v._v("每个定时器内部结构实际上就是一个可编程的加法计数器，")]),v._v(" "),_("p",[v._v("由编程来设置它工作在定时状态还是计数状态")]),v._v(" "),_("p",[_("strong",[v._v("补充")]),v._v("：")]),v._v(" "),_("ol",[_("li",[v._v("通过 "),_("code",[v._v("TCON")]),v._v(" 和 "),_("code",[v._v("TMOD")]),v._v(" 设置定时计数器的工作方式以及工作模式")]),v._v(" "),_("li",[v._v("设置定时计数器 "),_("code",[v._v("T0")]),v._v(" 和 "),_("code",[v._v("T1")]),v._v(" 这两个 16 位定时计数器寄存器的一个初值")])]),v._v(" "),_("blockquote",[_("p",[v._v("T0 (16bit)\tTH0(8)\tTL0(8)")]),v._v(" "),_("p",[v._v("T1 (16bit)\tTH1(8)\tTL1(8)")])]),v._v(" "),_("p",[v._v("在每个机器周期到来时，T0就会自动加 1 ，")]),v._v(" "),_("p",[v._v("当"),_("code",[v._v("TL0")]),v._v("加到 0xff 时，就会使 "),_("code",[v._v("TH0")]),v._v("加1 ，")]),v._v(" "),_("p",[v._v("当 "),_("code",[v._v("TH0 = 0xff")]),v._v(" ，并且 "),_("code",[v._v("TL0 = 0xff")])]),v._v(" "),_("p",[v._v("这种情况就被称为  "),_("strong",[v._v("溢出中断")])]),v._v(" "),_("h3",{attrs:{id:"两种工作模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#两种工作模式"}},[v._v("#")]),v._v(" 两种工作模式")]),v._v(" "),_("p",[_("strong",[v._v("计数器工作模式")])]),v._v(" "),_("p",[v._v("就是对外部事件进行计数。计数脉冲来自相应的外部输入引脚 "),_("code",[v._v("T0")]),v._v("或 "),_("code",[v._v("T1")])]),v._v(" "),_("p",[v._v("当输入信号发生由 1 至 0 的负跳变（"),_("strong",[v._v("下降沿")]),v._v("）时，计数器（TH0,TL0或HT1,TL1）的值增1。计数器的最高频率一般为震荡频率的 "),_("code",[v._v("1/24")])]),v._v(" "),_("p",[_("strong",[v._v("定时器工作模式")])]),v._v(" "),_("p",[v._v("也是通过计数实现的。计数脉冲来自内部时钟脉冲，每个机器周期计数值增1，每个机器周期 = 12 个震荡周期，因此计数频率为震荡频率的 "),_("code",[v._v("1/12")])]),v._v(" "),_("p",[v._v("所以定时事件 = 计数值 X 机器周期")]),v._v(" "),_("p",[_("strong",[v._v("4种工作方式（0-3）")])]),v._v(" "),_("h3",{attrs:{id:"原理-12mhz的晶振电路"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#原理-12mhz的晶振电路"}},[v._v("#")]),v._v(" 原理(12MHZ的晶振电路)")]),v._v(" "),_("p",[v._v("假设我们机器周期 是  "),_("code",[v._v("1us")]),v._v(" ，那定时 "),_("code",[v._v("1ms")]),v._v("，相当于让我们的定时计数器加")]),v._v(" "),_("p",[_("code",[v._v("1ms / 1us = 1000")]),v._v(" \t需要加让计数器计数1000次")]),v._v(" "),_("p",[v._v("设置初值为 "),_("code",[v._v("T0溢出值 - 计数的次数")])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://code.yuadh.com/doc-img/%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F.png",alt:""}})]),v._v(" "),_("p",[v._v("6个状态周期就是一个机器周期  === 12个震荡周期")]),v._v(" "),_("p",[v._v("12MHZ的晶振 === 1/12M")]),v._v(" "),_("p",[v._v("分频  12MHZ / 12 = 1MHZ")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://code.yuadh.com/doc-img/TMOD.png",alt:""}})]),v._v(" "),_("ol",[_("li",[_("p",[v._v("GATE - 门控位")]),v._v(" "),_("p",[v._v("以TRX(X=0,1) 来启动定时/计数器运行")])]),v._v(" "),_("li",[_("p",[v._v("C/T*-  计数器模式和定时器模式选择位")]),v._v(" "),_("p",[v._v("0：定时器模式")]),v._v(" "),_("p",[v._v("1：计数器模式")])]),v._v(" "),_("li",[_("p",[v._v("M1、M2 - 工作方式选择")]),v._v(" "),_("p",[v._v("M1\tM0\t工作方式")]),v._v(" "),_("p",[v._v("0\t   0 \t\t方式0 ，\t13位定时计数器")]),v._v(" "),_("p",[v._v("0  \t 1\t\t 方式1 ，\t 16位定时计数器")]),v._v(" "),_("p",[v._v("1 \t  0\t\t 方式2 ，\t  8位常数自动重新装载")]),v._v(" "),_("p",[v._v("1       1\t     方式3 ，\t   仅适用于 T0 （T0分为两个8 位计数器，T1停止计数）")])]),v._v(" "),_("li")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://code.yuadh.com/doc-img/TCON.png",alt:""}})]),v._v(" "),_("ol",[_("li",[_("p",[_("strong",[v._v("TF1、TF0")]),v._v(" : 计数溢出标志位")]),v._v(" "),_("p",[v._v("定时器T0或T1 计数溢出时，由硬件自动将此位置 “1”")]),v._v(" "),_("p",[v._v("TFx 可以由程序查询，也是定时中断的请求源")])]),v._v(" "),_("li",[_("p",[v._v("TR1、TR0 : 计数运行控制位")]),v._v(" "),_("p",[v._v("TRx=1：启动定时器/计数器工作")]),v._v(" "),_("p",[v._v("TRx=0：停止定时器/计数器工作")])])])])}),[],!1,null,null,null);_.default=o.exports}}]);